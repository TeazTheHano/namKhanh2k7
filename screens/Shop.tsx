import { View, Text, TouchableOpacity, Animated, Image, ImageStyle, FlatList, Easing, ScrollView, ImageBackground, Linking, Platform, Alert } from 'react-native'
import React, { useContext, useEffect, useMemo, useRef, useState } from 'react'
import { getStorageItem, getStorageList, getUser, removeStorageItem, saveStorageItem } from '../data/storageFunc'
import { BannerSliderWithCenter, RoundBtn, SaveViewWithColorStatusBar, SSBar, SSBarWithSaveArea, TopNav, ViewCol, ViewColBetweenCenter, ViewRow, ViewRowBetweenCenter, ViewRowCenter, ViewRowEvenlyCenter, ViewRowStartCenter } from '../assets/Class'
import { Nunito12Bold, Nunito14Reg, Nunito14Bold, Nunito16Bold, Nunito18Bold, Nunito20Bold, Nunito12Reg, } from '../assets/CustomText'
import clrStyle, { componentStyle } from '../assets/componentStyleSheet'
import styles, { vh, vw } from '../assets/stylesheet'
import * as SVG from '../assets/svgXml'

import { useNavigation, useRoute } from '@react-navigation/native'
import { currentSetCurrentWeather, currentSetLocation, RootContext } from '../data/store'
import { iconCodeList, iconRequireList, products } from '../data/factoryData'
import { ListGen, marginBottomForScrollView } from '../assets/component'
import { useSafeAreaInsets } from 'react-native-safe-area-context'
import { SvgXml } from 'react-native-svg'

export default function Shop() {
  const navigation = useNavigation();
  const insets = useSafeAreaInsets();

  const [CurrentCache, dispatch] = React.useContext(RootContext);


  class FreeShipIcon extends React.PureComponent {
    render() {
      return (
        <SvgXml xml={`<svg width="51" height="19" viewBox="0 0 51 19" fill="none" xmlns="http://www.w3.org/2000/svg"><rect y="0.5" width="51" height="18" rx="6" fill="url(#paint0_linear_2130_3069)"/><path d="M5.43 12.58C5.22333 12.58 5.06 12.5233 4.94 12.41C4.82667 12.29 4.77 12.12 4.77 11.9V6.13C4.77 5.91 4.82667 5.74333 4.94 5.63C5.06 5.51 5.23 5.45 5.45 5.45H8.94C9.11333 5.45 9.24333 5.49333 9.33 5.58C9.41667 5.66667 9.46 5.79 9.46 5.95C9.46 6.11667 9.41667 6.24667 9.33 6.34C9.24333 6.42667 9.11333 6.47 8.94 6.47H6.05V8.46H8.73C8.89667 8.46 9.02333 8.50333 9.11 8.59C9.20333 8.67667 9.25 8.8 9.25 8.96C9.25 9.12667 9.20333 9.25667 9.11 9.35C9.02333 9.43667 8.89667 9.48 8.73 9.48H6.05V11.9C6.05 12.3533 5.84333 12.58 5.43 12.58ZM10.8076 12.58C10.6009 12.58 10.4409 12.5267 10.3276 12.42C10.2209 12.3067 10.1676 12.1467 10.1676 11.94V8.16C10.1676 7.95333 10.2209 7.79667 10.3276 7.69C10.4342 7.58333 10.5842 7.53 10.7776 7.53C10.9709 7.53 11.1209 7.58333 11.2276 7.69C11.3342 7.79667 11.3876 7.95333 11.3876 8.16V8.79H11.2876C11.3809 8.39 11.5642 8.08667 11.8376 7.88C12.1109 7.67333 12.4742 7.55 12.9276 7.51C13.0676 7.49667 13.1776 7.53333 13.2576 7.62C13.3442 7.7 13.3942 7.82667 13.4076 8C13.4209 8.16667 13.3809 8.30333 13.2876 8.41C13.2009 8.51 13.0676 8.57 12.8876 8.59L12.6676 8.61C12.2609 8.65 11.9542 8.77667 11.7476 8.99C11.5409 9.19667 11.4376 9.49 11.4376 9.87V11.94C11.4376 12.1467 11.3842 12.3067 11.2776 12.42C11.1709 12.5267 11.0142 12.58 10.8076 12.58ZM16.4155 12.6C15.8621 12.6 15.3855 12.4967 14.9855 12.29C14.5855 12.0833 14.2755 11.79 14.0555 11.41C13.8421 11.03 13.7355 10.58 13.7355 10.06C13.7355 9.55333 13.8388 9.11 14.0455 8.73C14.2588 8.35 14.5488 8.05333 14.9155 7.84C15.2888 7.62 15.7121 7.51 16.1855 7.51C16.5321 7.51 16.8421 7.56667 17.1155 7.68C17.3955 7.79333 17.6321 7.95667 17.8255 8.17C18.0255 8.38333 18.1755 8.64333 18.2755 8.95C18.3821 9.25 18.4355 9.59 18.4355 9.97C18.4355 10.09 18.3921 10.1833 18.3055 10.25C18.2255 10.31 18.1088 10.34 17.9555 10.34H14.7455V9.62H17.5555L17.3955 9.77C17.3955 9.46333 17.3488 9.20667 17.2555 9C17.1688 8.79333 17.0388 8.63667 16.8655 8.53C16.6988 8.41667 16.4888 8.36 16.2355 8.36C15.9555 8.36 15.7155 8.42667 15.5155 8.56C15.3221 8.68667 15.1721 8.87 15.0655 9.11C14.9655 9.34333 14.9155 9.62333 14.9155 9.95V10.02C14.9155 10.5667 15.0421 10.9767 15.2955 11.25C15.5555 11.5167 15.9355 11.65 16.4355 11.65C16.6088 11.65 16.8021 11.63 17.0155 11.59C17.2355 11.5433 17.4421 11.4667 17.6355 11.36C17.7755 11.28 17.8988 11.2467 18.0055 11.26C18.1121 11.2667 18.1955 11.3033 18.2555 11.37C18.3221 11.4367 18.3621 11.52 18.3755 11.62C18.3888 11.7133 18.3688 11.81 18.3155 11.91C18.2688 12.01 18.1855 12.0967 18.0655 12.17C17.8321 12.3167 17.5621 12.4267 17.2555 12.5C16.9555 12.5667 16.6755 12.6 16.4155 12.6ZM21.8354 12.6C21.2821 12.6 20.8054 12.4967 20.4054 12.29C20.0054 12.0833 19.6954 11.79 19.4754 11.41C19.2621 11.03 19.1554 10.58 19.1554 10.06C19.1554 9.55333 19.2587 9.11 19.4654 8.73C19.6787 8.35 19.9687 8.05333 20.3354 7.84C20.7087 7.62 21.1321 7.51 21.6054 7.51C21.9521 7.51 22.2621 7.56667 22.5354 7.68C22.8154 7.79333 23.0521 7.95667 23.2454 8.17C23.4454 8.38333 23.5954 8.64333 23.6954 8.95C23.8021 9.25 23.8554 9.59 23.8554 9.97C23.8554 10.09 23.8121 10.1833 23.7254 10.25C23.6454 10.31 23.5287 10.34 23.3754 10.34H20.1654V9.62H22.9754L22.8154 9.77C22.8154 9.46333 22.7687 9.20667 22.6754 9C22.5887 8.79333 22.4587 8.63667 22.2854 8.53C22.1187 8.41667 21.9087 8.36 21.6554 8.36C21.3754 8.36 21.1354 8.42667 20.9354 8.56C20.7421 8.68667 20.5921 8.87 20.4854 9.11C20.3854 9.34333 20.3354 9.62333 20.3354 9.95V10.02C20.3354 10.5667 20.4621 10.9767 20.7154 11.25C20.9754 11.5167 21.3554 11.65 21.8554 11.65C22.0287 11.65 22.2221 11.63 22.4354 11.59C22.6554 11.5433 22.8621 11.4667 23.0554 11.36C23.1954 11.28 23.3187 11.2467 23.4254 11.26C23.5321 11.2667 23.6154 11.3033 23.6754 11.37C23.7421 11.4367 23.7821 11.52 23.7954 11.62C23.8087 11.7133 23.7887 11.81 23.7354 11.91C23.6887 12.01 23.6054 12.0967 23.4854 12.17C23.2521 12.3167 22.9821 12.4267 22.6754 12.5C22.3754 12.5667 22.0954 12.6 21.8354 12.6ZM29.3502 12.6C29.0635 12.6 28.7602 12.57 28.4402 12.51C28.1202 12.45 27.8335 12.3467 27.5802 12.2C27.4735 12.1333 27.3968 12.0567 27.3502 11.97C27.3102 11.8767 27.2935 11.7867 27.3002 11.7C27.3135 11.6067 27.3468 11.5267 27.4002 11.46C27.4602 11.3933 27.5335 11.35 27.6202 11.33C27.7135 11.31 27.8135 11.3267 27.9202 11.38C28.1868 11.5067 28.4368 11.5967 28.6702 11.65C28.9035 11.6967 29.1335 11.72 29.3602 11.72C29.6802 11.72 29.9168 11.6667 30.0702 11.56C30.2302 11.4467 30.3102 11.3 30.3102 11.12C30.3102 10.9667 30.2568 10.85 30.1502 10.77C30.0502 10.6833 29.8968 10.62 29.6902 10.58L28.6902 10.39C28.2768 10.31 27.9602 10.16 27.7402 9.94C27.5268 9.71333 27.4202 9.42333 27.4202 9.07C27.4202 8.75 27.5068 8.47333 27.6802 8.24C27.8602 8.00667 28.1068 7.82667 28.4202 7.7C28.7335 7.57333 29.0935 7.51 29.5002 7.51C29.7935 7.51 30.0668 7.54333 30.3202 7.61C30.5802 7.67 30.8302 7.76667 31.0702 7.9C31.1702 7.95333 31.2368 8.02333 31.2702 8.11C31.3102 8.19667 31.3202 8.28667 31.3002 8.38C31.2802 8.46667 31.2402 8.54667 31.1802 8.62C31.1202 8.68667 31.0435 8.73 30.9502 8.75C30.8635 8.76333 30.7635 8.74333 30.6502 8.69C30.4435 8.58333 30.2435 8.50667 30.0502 8.46C29.8635 8.41333 29.6835 8.39 29.5102 8.39C29.1835 8.39 28.9402 8.44667 28.7802 8.56C28.6268 8.67333 28.5502 8.82333 28.5502 9.01C28.5502 9.15 28.5968 9.26667 28.6902 9.36C28.7835 9.45333 28.9268 9.51667 29.1202 9.55L30.1202 9.74C30.5535 9.82 30.8802 9.96667 31.1002 10.18C31.3268 10.3933 31.4402 10.68 31.4402 11.04C31.4402 11.5267 31.2502 11.91 30.8702 12.19C30.4902 12.4633 29.9835 12.6 29.3502 12.6ZM33.063 12.58C32.863 12.58 32.7096 12.5267 32.603 12.42C32.4963 12.3067 32.443 12.1467 32.443 11.94V6C32.443 5.79333 32.4963 5.63667 32.603 5.53C32.7096 5.42333 32.863 5.37 33.063 5.37C33.263 5.37 33.4163 5.42333 33.523 5.53C33.6363 5.63667 33.693 5.79333 33.693 6V8.59H33.553C33.6996 8.23667 33.9263 7.97 34.233 7.79C34.5463 7.60333 34.8996 7.51 35.293 7.51C35.6863 7.51 36.0096 7.58333 36.263 7.73C36.5163 7.87667 36.7063 8.1 36.833 8.4C36.9596 8.69333 37.023 9.06667 37.023 9.52V11.94C37.023 12.1467 36.9696 12.3067 36.863 12.42C36.7563 12.5267 36.603 12.58 36.403 12.58C36.203 12.58 36.0463 12.5267 35.933 12.42C35.8263 12.3067 35.773 12.1467 35.773 11.94V9.58C35.773 9.2 35.6996 8.92333 35.553 8.75C35.413 8.57667 35.193 8.49 34.893 8.49C34.5263 8.49 34.233 8.60667 34.013 8.84C33.7996 9.06667 33.693 9.37 33.693 9.75V11.94C33.693 12.3667 33.483 12.58 33.063 12.58ZM38.9126 12.57C38.7126 12.57 38.5592 12.51 38.4526 12.39C38.3459 12.27 38.2926 12.1033 38.2926 11.89V8.22C38.2926 8 38.3459 7.83333 38.4526 7.72C38.5592 7.6 38.7126 7.54 38.9126 7.54C39.1126 7.54 39.2659 7.6 39.3726 7.72C39.4859 7.83333 39.5426 8 39.5426 8.22V11.89C39.5426 12.1033 39.4892 12.27 39.3826 12.39C39.2759 12.51 39.1192 12.57 38.9126 12.57ZM38.9126 6.61C38.6792 6.61 38.4959 6.55333 38.3626 6.44C38.2359 6.32 38.1726 6.15667 38.1726 5.95C38.1726 5.73667 38.2359 5.57333 38.3626 5.46C38.4959 5.34667 38.6792 5.29 38.9126 5.29C39.1526 5.29 39.3359 5.34667 39.4626 5.46C39.5892 5.57333 39.6526 5.73667 39.6526 5.95C39.6526 6.15667 39.5892 6.32 39.4626 6.44C39.3359 6.55333 39.1526 6.61 38.9126 6.61ZM41.4614 14.38C41.2614 14.38 41.1081 14.3267 41.0014 14.22C40.8947 14.1133 40.8414 13.9567 40.8414 13.75V8.16C40.8414 7.95333 40.8947 7.79667 41.0014 7.69C41.1081 7.58333 41.2581 7.53 41.4514 7.53C41.6514 7.53 41.8047 7.58333 41.9114 7.69C42.0181 7.79667 42.0714 7.95333 42.0714 8.16V8.94L41.9614 8.64C42.0614 8.3 42.2647 8.02667 42.5714 7.82C42.8847 7.61333 43.2481 7.51 43.6614 7.51C44.0881 7.51 44.4614 7.61333 44.7814 7.82C45.1081 8.02667 45.3614 8.32 45.5414 8.7C45.7214 9.07333 45.8114 9.52333 45.8114 10.05C45.8114 10.57 45.7214 11.0233 45.5414 11.41C45.3614 11.79 45.1114 12.0833 44.7914 12.29C44.4714 12.4967 44.0947 12.6 43.6614 12.6C43.2547 12.6 42.8981 12.5 42.5914 12.3C42.2847 12.0933 42.0781 11.8267 41.9714 11.5H42.0914V13.75C42.0914 13.9567 42.0347 14.1133 41.9214 14.22C41.8147 14.3267 41.6614 14.38 41.4614 14.38ZM43.3114 11.65C43.5581 11.65 43.7747 11.59 43.9614 11.47C44.1481 11.35 44.2914 11.1733 44.3914 10.94C44.4981 10.7 44.5514 10.4033 44.5514 10.05C44.5514 9.51667 44.4381 9.12 44.2114 8.86C43.9847 8.59333 43.6847 8.46 43.3114 8.46C43.0647 8.46 42.8481 8.52 42.6614 8.64C42.4747 8.75333 42.3281 8.93 42.2214 9.17C42.1214 9.40333 42.0714 9.69667 42.0714 10.05C42.0714 10.5767 42.1847 10.9767 42.4114 11.25C42.6381 11.5167 42.9381 11.65 43.3114 11.65Z" fill="#FCFCFC"/><defs><linearGradient id="paint0_linear_2130_3069" x1="2.21739" y1="-2.36364" x2="35.6811" y2="34.5865" gradientUnits="userSpaceOnUse"><stop stop-color="#6AC9FF"/><stop offset="0.5" stop-color="#4E6AFF"/><stop offset="1" stop-color="#6AC9FF"/></linearGradient></defs></svg>`} />
      )
    }
  }

  class GoodPriceIcon extends React.Component {
    render(): React.ReactNode {
      return (
        <SvgXml xml={`<svg width="40" height="19" viewBox="0 0 40 19" fill="none" xmlns="http://www.w3.org/2000/svg"><rect y="0.5" width="40" height="18" rx="6" fill="url(#paint0_linear_2130_3071)"/><path d="M8.16 12.6C7.38 12.6 6.72 12.4533 6.18 12.16C5.64667 11.8667 5.24 11.45 4.96 10.91C4.68 10.37 4.54 9.73 4.54 8.99C4.54 8.43 4.62 7.92667 4.78 7.48C4.94667 7.03333 5.18333 6.65333 5.49 6.34C5.80333 6.02 6.18333 5.77667 6.63 5.61C7.07667 5.43667 7.58333 5.35 8.15 5.35C8.52333 5.35 8.89667 5.39667 9.27 5.49C9.65 5.57667 10.0067 5.72667 10.34 5.94C10.4533 6.01333 10.5267 6.10333 10.56 6.21C10.6 6.31667 10.6067 6.42667 10.58 6.54C10.5533 6.64667 10.5033 6.74 10.43 6.82C10.3567 6.9 10.2633 6.95 10.15 6.97C10.0433 6.99 9.92333 6.96333 9.79 6.89C9.53667 6.74333 9.28 6.63667 9.02 6.57C8.76 6.50333 8.47 6.47 8.15 6.47C7.65667 6.47 7.24 6.57 6.9 6.77C6.56 6.96333 6.30333 7.24667 6.13 7.62C5.96333 7.99333 5.88 8.45 5.88 8.99C5.88 9.81 6.07667 10.4333 6.47 10.86C6.86333 11.2867 7.44667 11.5 8.22 11.5C8.48667 11.5 8.75667 11.4733 9.03 11.42C9.30333 11.3667 9.57 11.2933 9.83 11.2L9.58 11.77V9.64H8.48C8.31333 9.64 8.18333 9.59667 8.09 9.51C8.00333 9.42333 7.96 9.30667 7.96 9.16C7.96 9.00667 8.00333 8.89 8.09 8.81C8.18333 8.73 8.31333 8.69 8.48 8.69H10.13C10.2967 8.69 10.4233 8.73667 10.51 8.83C10.6033 8.91667 10.65 9.04333 10.65 9.21V11.64C10.65 11.7867 10.62 11.91 10.56 12.01C10.5067 12.11 10.4167 12.1833 10.29 12.23C9.99667 12.3367 9.66 12.4267 9.28 12.5C8.9 12.5667 8.52667 12.6 8.16 12.6ZM12.6333 12.57C12.4333 12.57 12.2799 12.51 12.1733 12.39C12.0666 12.27 12.0133 12.1033 12.0133 11.89V8.22C12.0133 8 12.0666 7.83333 12.1733 7.72C12.2799 7.6 12.4333 7.54 12.6333 7.54C12.8333 7.54 12.9866 7.6 13.0933 7.72C13.2066 7.83333 13.2633 8 13.2633 8.22V11.89C13.2633 12.1033 13.2099 12.27 13.1033 12.39C12.9966 12.51 12.8399 12.57 12.6333 12.57ZM12.6333 6.61C12.3999 6.61 12.2166 6.55333 12.0833 6.44C11.9566 6.32 11.8933 6.15667 11.8933 5.95C11.8933 5.73667 11.9566 5.57333 12.0833 5.46C12.2166 5.34667 12.3999 5.29 12.6333 5.29C12.8733 5.29 13.0566 5.34667 13.1833 5.46C13.3099 5.57333 13.3733 5.73667 13.3733 5.95C13.3733 6.15667 13.3099 6.32 13.1833 6.44C13.0566 6.55333 12.8733 6.61 12.6333 6.61ZM16.1721 12.6C15.8188 12.6 15.5021 12.5333 15.2221 12.4C14.9488 12.26 14.7321 12.0733 14.5721 11.84C14.4188 11.6067 14.3421 11.3433 14.3421 11.05C14.3421 10.69 14.4354 10.4067 14.6221 10.2C14.8088 9.98667 15.1121 9.83333 15.5321 9.74C15.9521 9.64667 16.5154 9.6 17.2221 9.6H17.7221V10.32H17.2321C16.8188 10.32 16.4888 10.34 16.2421 10.38C15.9954 10.42 15.8188 10.49 15.7121 10.59C15.6121 10.6833 15.5621 10.8167 15.5621 10.99C15.5621 11.21 15.6388 11.39 15.7921 11.53C15.9454 11.67 16.1588 11.74 16.4321 11.74C16.6521 11.74 16.8454 11.69 17.0121 11.59C17.1854 11.4833 17.3221 11.34 17.4221 11.16C17.5221 10.98 17.5721 10.7733 17.5721 10.54V9.39C17.5721 9.05667 17.4988 8.81667 17.3521 8.67C17.2054 8.52333 16.9588 8.45 16.6121 8.45C16.4188 8.45 16.2088 8.47333 15.9821 8.52C15.7621 8.56667 15.5288 8.64667 15.2821 8.76C15.1554 8.82 15.0421 8.83667 14.9421 8.81C14.8488 8.78333 14.7754 8.73 14.7221 8.65C14.6688 8.56333 14.6421 8.47 14.6421 8.37C14.6421 8.27 14.6688 8.17333 14.7221 8.08C14.7754 7.98 14.8654 7.90667 14.9921 7.86C15.2988 7.73333 15.5921 7.64333 15.8721 7.59C16.1588 7.53667 16.4188 7.51 16.6521 7.51C17.1321 7.51 17.5254 7.58333 17.8321 7.73C18.1454 7.87667 18.3788 8.1 18.5321 8.4C18.6854 8.69333 18.7621 9.07333 18.7621 9.54V11.94C18.7621 12.1467 18.7121 12.3067 18.6121 12.42C18.5121 12.5267 18.3688 12.58 18.1821 12.58C17.9954 12.58 17.8488 12.5267 17.7421 12.42C17.6421 12.3067 17.5921 12.1467 17.5921 11.94V11.46H17.6721C17.6254 11.6933 17.5321 11.8967 17.3921 12.07C17.2588 12.2367 17.0888 12.3667 16.8821 12.46C16.6754 12.5533 16.4388 12.6 16.1721 12.6ZM17.1721 6.9C17.1054 6.99333 17.0254 7.04667 16.9321 7.06C16.8388 7.07333 16.7488 7.05667 16.6621 7.01C16.5754 6.96333 16.5121 6.89667 16.4721 6.81C16.4388 6.72333 16.4488 6.62667 16.5021 6.52L17.2621 5.03C17.3221 4.90333 17.4021 4.82333 17.5021 4.79C17.6021 4.75 17.7054 4.74333 17.8121 4.77C17.9188 4.79667 18.0088 4.84667 18.0821 4.92C18.1621 4.99333 18.2088 5.08333 18.2221 5.19C18.2421 5.29 18.2154 5.39333 18.1421 5.5L17.1721 6.9ZM24.9857 12.6C24.5524 12.6 24.189 12.5267 23.8957 12.38C23.609 12.2333 23.3957 12.02 23.2557 11.74C23.1157 11.4533 23.0457 11.1 23.0457 10.68V8.55H22.5257C22.3657 8.55 22.2424 8.51 22.1557 8.43C22.069 8.34333 22.0257 8.22667 22.0257 8.08C22.0257 7.92667 22.069 7.81 22.1557 7.73C22.2424 7.65 22.3657 7.61 22.5257 7.61H23.0457V6.7C23.0457 6.49333 23.099 6.33667 23.2057 6.23C23.319 6.12333 23.4757 6.07 23.6757 6.07C23.8757 6.07 24.029 6.12333 24.1357 6.23C24.2424 6.33667 24.2957 6.49333 24.2957 6.7V7.61H25.3557C25.5157 7.61 25.639 7.65 25.7257 7.73C25.8124 7.81 25.8557 7.92667 25.8557 8.08C25.8557 8.22667 25.8124 8.34333 25.7257 8.43C25.639 8.51 25.5157 8.55 25.3557 8.55H24.2957V10.61C24.2957 10.93 24.3657 11.17 24.5057 11.33C24.6457 11.49 24.8724 11.57 25.1857 11.57C25.299 11.57 25.399 11.56 25.4857 11.54C25.5724 11.52 25.649 11.5067 25.7157 11.5C25.7957 11.4933 25.8624 11.52 25.9157 11.58C25.969 11.6333 25.9957 11.7467 25.9957 11.92C25.9957 12.0533 25.9724 12.1733 25.9257 12.28C25.8857 12.38 25.809 12.45 25.6957 12.49C25.609 12.5167 25.4957 12.54 25.3557 12.56C25.2157 12.5867 25.0924 12.6 24.9857 12.6ZM28.7648 12.6C28.2581 12.6 27.8181 12.4967 27.4448 12.29C27.0714 12.0833 26.7814 11.79 26.5748 11.41C26.3681 11.0233 26.2648 10.57 26.2648 10.05C26.2648 9.65667 26.3214 9.30667 26.4348 9C26.5548 8.68667 26.7248 8.42 26.9448 8.2C27.1648 7.97333 27.4281 7.80333 27.7348 7.69C28.0414 7.57 28.3848 7.51 28.7648 7.51C29.2714 7.51 29.7114 7.61333 30.0848 7.82C30.4581 8.02667 30.7481 8.32 30.9548 8.7C31.1614 9.08 31.2648 9.53 31.2648 10.05C31.2648 10.4433 31.2048 10.7967 31.0848 11.11C30.9714 11.4233 30.8048 11.6933 30.5848 11.92C30.3648 12.14 30.1014 12.31 29.7948 12.43C29.4881 12.5433 29.1448 12.6 28.7648 12.6ZM28.7648 11.65C29.0114 11.65 29.2281 11.59 29.4148 11.47C29.6014 11.35 29.7448 11.1733 29.8448 10.94C29.9514 10.7 30.0048 10.4033 30.0048 10.05C30.0048 9.51667 29.8914 9.12 29.6648 8.86C29.4381 8.59333 29.1381 8.46 28.7648 8.46C28.5181 8.46 28.3014 8.52 28.1148 8.64C27.9281 8.75333 27.7814 8.93 27.6748 9.17C27.5748 9.40333 27.5248 9.69667 27.5248 10.05C27.5248 10.5767 27.6381 10.9767 27.8648 11.25C28.0914 11.5167 28.3914 11.65 28.7648 11.65ZM27.9548 6.92C27.8748 7.00667 27.7881 7.05667 27.6948 7.07C27.6081 7.08333 27.5281 7.06667 27.4548 7.02C27.3881 6.97333 27.3448 6.91 27.3248 6.83C27.3048 6.74333 27.3281 6.65 27.3948 6.55L28.0448 5.58C28.1448 5.43333 28.2514 5.33333 28.3648 5.28C28.4848 5.22 28.6181 5.19 28.7648 5.19C28.8648 5.19 28.9581 5.20333 29.0448 5.23C29.1314 5.25 29.2114 5.29 29.2848 5.35C29.3581 5.40333 29.4248 5.48 29.4848 5.58L30.1348 6.55C30.2014 6.65 30.2248 6.74333 30.2048 6.83C30.1914 6.91 30.1514 6.97333 30.0848 7.02C30.0181 7.06667 29.9381 7.08333 29.8448 7.07C29.7514 7.05667 29.6648 7.00667 29.5848 6.92L28.7648 6.01L27.9548 6.92ZM30.5148 5.96C30.4548 6.04 30.3848 6.08667 30.3048 6.1C30.2248 6.10667 30.1514 6.09 30.0848 6.05C30.0248 6.01 29.9848 5.95333 29.9648 5.88C29.9448 5.8 29.9614 5.71 30.0148 5.61L30.6348 4.51C30.6948 4.40333 30.7681 4.33667 30.8548 4.31C30.9414 4.27667 31.0281 4.27333 31.1148 4.3C31.2014 4.32 31.2714 4.36333 31.3248 4.43C31.3848 4.49 31.4181 4.56667 31.4248 4.66C31.4314 4.74667 31.3981 4.83667 31.3248 4.93L30.5148 5.96ZM34.4877 12.6C34.0543 12.6 33.691 12.5267 33.3977 12.38C33.111 12.2333 32.8977 12.02 32.7577 11.74C32.6177 11.4533 32.5477 11.1 32.5477 10.68V8.55H32.0277C31.8677 8.55 31.7443 8.51 31.6577 8.43C31.571 8.34333 31.5277 8.22667 31.5277 8.08C31.5277 7.92667 31.571 7.81 31.6577 7.73C31.7443 7.65 31.8677 7.61 32.0277 7.61H32.5477V6.7C32.5477 6.49333 32.601 6.33667 32.7077 6.23C32.821 6.12333 32.9777 6.07 33.1777 6.07C33.3777 6.07 33.531 6.12333 33.6377 6.23C33.7443 6.33667 33.7977 6.49333 33.7977 6.7V7.61H34.8577C35.0177 7.61 35.141 7.65 35.2277 7.73C35.3143 7.81 35.3577 7.92667 35.3577 8.08C35.3577 8.22667 35.3143 8.34333 35.2277 8.43C35.141 8.51 35.0177 8.55 34.8577 8.55H33.7977V10.61C33.7977 10.93 33.8677 11.17 34.0077 11.33C34.1477 11.49 34.3743 11.57 34.6877 11.57C34.801 11.57 34.901 11.56 34.9877 11.54C35.0743 11.52 35.151 11.5067 35.2177 11.5C35.2977 11.4933 35.3643 11.52 35.4177 11.58C35.471 11.6333 35.4977 11.7467 35.4977 11.92C35.4977 12.0533 35.4743 12.1733 35.4277 12.28C35.3877 12.38 35.311 12.45 35.1977 12.49C35.111 12.5167 34.9977 12.54 34.8577 12.56C34.7177 12.5867 34.5943 12.6 34.4877 12.6Z" fill="#FCFCFC"/><defs><linearGradient id="paint0_linear_2130_3071" x1="1.73913" y1="-2.36364" x2="35.0224" y2="26.4606" gradientUnits="userSpaceOnUse"><stop stop-color="#FFD231"/><stop offset="0.5" stop-color="#FF834E"/><stop offset="1" stop-color="#F3C10C"/></linearGradient></defs></svg>`} />
      )
    }
  }

  const MemorizedFreeShipIcon = useMemo(() => <FreeShipIcon />, [])
  const MemorizedGoodPriceIcon = useMemo(() => <GoodPriceIcon />, [])

  return (
    <SSBarWithSaveArea barContentStyle='dark-content' barColor={clrStyle.main1} bgColor={clrStyle.main1}>
      <TopNav title={'Gian hàng'} returnPreScreen returnPreScreenFnc={()=>{}} rightIcon={SVG.cart(vw(6), vw(6))}  leftIcon={SVG.searchIcon}/>
      {products.length > 0 ?
        <FlatList
          data={products}
          renderItem={({ item, index }) => {
            return (
              <TouchableOpacity key={index} onPress={() => { navigation.navigate('ProductDetail', { product: item }) }}
                style={[styles.borderRadius10, styles.bgcolorWhite, styles.w100, styles.flexRow, styles.padding4vw, styles.gap4vw]}>

                <Image source={item.img[0]} resizeMode='contain' resizeMethod='resize' style={[styles.w25vw, styles.h100, styles.borderRadius10,] as ImageStyle} />
                <ViewCol style={[styles.gap1vw, styles.flex1]}>
                  <Nunito18Bold lineNumber={2} color={clrStyle.main2}>{item.name.trim()}</Nunito18Bold>
                  <ViewCol style={[styles.flex1, styles.gap1vw, styles.paddingV2vw, { borderTopWidth: 1, borderColor: clrStyle.grey2 }]}>
                    <Nunito12Reg>Lượt mua:  <Nunito12Bold style={[styles.w60, styles.textLeft]} color={clrStyle.black}>{item.buyCount > 1000 ? `${(item.buyCount / 1000).toFixed(1)}k+` : item.buyCount || '--'}</Nunito12Bold></Nunito12Reg>
                    <ViewRowStartCenter style={[]}>
                      <Nunito12Reg>Đánh giá:  <Nunito12Bold style={[styles.w60, styles.textLeft]} color={clrStyle.black}>{item.rate.toFixed(1) || '--'} /5 </Nunito12Bold></Nunito12Reg>
                      <SvgXml xml={`<svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.54894 0.927052C4.8483 0.00574136 6.1517 0.0057404 6.45106 0.927051L6.95934 2.49139C7.09321 2.90341 7.47717 3.18237 7.9104 3.18237H9.55524C10.524 3.18237 10.9267 4.42199 10.143 4.99139L8.81232 5.9582C8.46183 6.21285 8.31518 6.66422 8.44905 7.07624L8.95733 8.64058C9.25669 9.56189 8.20221 10.328 7.41849 9.75861L6.08779 8.7918C5.7373 8.53715 5.2627 8.53715 4.91221 8.7918L3.58151 9.75861C2.7978 10.328 1.74331 9.56189 2.04267 8.64058L2.55095 7.07624C2.68483 6.66422 2.53817 6.21285 2.18768 5.9582L0.856976 4.99139C0.0732617 4.42199 0.476037 3.18237 1.44476 3.18237H3.0896C3.52283 3.18237 3.90678 2.90341 4.04066 2.49139L4.54894 0.927052Z" fill="url(#paint0_linear_2130_3067)"/><defs><linearGradient id="paint0_linear_2130_3067" x1="5.5" y1="-2" x2="5.5" y2="13" gradientUnits="userSpaceOnUse"><stop stop-color="#EEBA00"/><stop offset="1" stop-color="#FFEC40"/></linearGradient></defs></svg>`} />
                    </ViewRowStartCenter>
                    <ViewRowCenter style={[styles.justifyContentEnd, styles.gap1vw]}>
                      {MemorizedFreeShipIcon}
                      {MemorizedGoodPriceIcon}
                      <Nunito18Bold color={clrStyle.main4}>{`${Math.floor(item.price / 1000)}`}<Nunito14Bold>{(item.price % 1000) / 100 > 0 ? `,${(item.price % 1000)}` : ',000'} VND</Nunito14Bold></Nunito18Bold>
                    </ViewRowCenter>
                  </ViewCol>
                </ViewCol>
              </TouchableOpacity>
            )
          }}
          keyExtractor={(item, index) => index.toString()}
          showsHorizontalScrollIndicator={false}
          contentContainerStyle={[styles.gap4vw]}
          style={[styles.alignSelfCenter, styles.paddingH6vw, styles.w100]}
        /> :
        <Nunito14Bold style={[styles.padding2vw]}>Chưa có cây trồng</Nunito14Bold>}
    </SSBarWithSaveArea >
  )
}